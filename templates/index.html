<div class="page-container">

  <div class="task-column">
    <h2>Tasks</h2>
    {% if tasks %}
      <ul>
      {% for task in tasks %}
        <li>
          {{ "âœ…" if task.completed else "âŒ" }} {{ task.name }} ({{ task.category }})
          <!-- Timer display for each task -->
          {% set elapsed = task.get_elapsed() %}
          {% set mins = (elapsed // 60) | int %}
          {% set secs = (elapsed % 60) | int %}
          <br>
          â± {{ "%02d"|format(mins) }}:{{ "%02d"|format(secs) }}

          <!-- Timer buttons for this task -->
          <form method="POST" action="/start_timer/{{ task.id }}" style="display:inline;">
            <button type="submit">â–¶ï¸ Start</button>
          </form>
          <form method="POST" action="/stop_timer/{{ task.id }}" style="display:inline;">
            <button type="submit">â¸ï¸ Stop</button>
          </form>
          <form method="POST" action="/reset_timer/{{ task.id }}" style="display:inline;">
            <button type="submit">ğŸ”„ Reset</button>
          </form>

          {% if not task.completed %}
            <a href="{{ url_for('complete_task', task_id=task.id) }}">âœ… Mark complete</a>
          {% endif %}
          <form action="{{ url_for('delete', task_id=task.id) }}" method="post" style="display:inline;">
            <button type="submit">ğŸ—‘ï¸ Delete</button>
          </form>
        </li>
      {% endfor %}
      </ul>
    {% else %}
      <p>No tasks yet!</p>
    {% endif %}
  </div>

  <div class="add-task-column">
    <h3>Add Task</h3>
    <form method="POST" action="/add">
      <input type="text" name="name" placeholder="Task name" required>
      <input type="text" name="category" placeholder="Category (optional)">
      <button type="submit">Add</button>
    </form>
  </div>

  <div class="timer-column">
    <h3>Timer Controls</h3>
    <p>Set a countdown timer:</p>
    <form id="countdown-form">
      <label for="countdown-minutes">Minutes:</label>
      <input type="number" id="countdown-minutes" min="0" value="0">
      <label for="countdown-seconds">Seconds:</label>
      <input type="number" id="countdown-seconds" min="0" max="59" value="0">
      <button type="button" onclick="startCountdown()">Start Countdown</button>
      <button type="button" onclick="stopCountdown()">Stop</button>
      <button type="button" onclick="resetCountdown()">Reset</button>
    </form>
    <div id="countdown-display" style="font-size: 2rem; margin-top: 1rem;">00:00</div>
  </div>

</div>
