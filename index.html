{% extends 'base.html' %}

{% block content %}
  <div class="title-block">
    <h1>Focus Hut</h1>
    <p class="subtitle">Come study with us!</p>
  </div>

  <h2 style="text-align: left; font-size: 2rem;">Tasks</h2>

  <div class="task-column">
    {% if tasks %}
      <ul>
        {% for task in tasks %}
          <li>
            {{ "✅" if task.completed else "❌" }}
            {{ task.name }} ({{ task.category }})

            {% set elapsed = task.get_elapsed() %}
            {% set mins = (elapsed // 60) | int %}
            {% set secs = (elapsed % 60) | int %}
            ⏱ {{ "%02d"|format(mins) }}:{{ "%02d"|format(secs) }}

            <form action="{{ url_for('complete_task', task_id=task.id) }}" method="post" style="display:inline;">
              {% if not task.completed %}
                <button type="submit">✅ Mark complete</button>
              {% endif %}
            </form>

            <form action="{{ url_for('delete', task_id=task.id) }}" method="post" style="display:inline;">
              <button type="submit">🗑️ Delete</button>
            </form>

            <!-- Add timer control buttons if you want them functional with forms or JS -->
            <!-- For now, you can add placeholders or implement later -->
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No tasks yet!</p>
    {% endif %}

    <h3>Add Task</h3>
    <form method="POST" action="/add">
      <input type="text" name="name" placeholder="Task name" required>
      <input type="text" name="category" placeholder="Category (optional)">
      <button type="submit">Add</button>
    </form>
  </div>
{% endblock %}
